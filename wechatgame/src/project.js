window.__require=function t(e,o,n){function i(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({Bubble:[function(t,e,o){"use strict";cc._RF.push(e,"71c7dLprbZNXqiTR9QU/2/L","Bubble");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bubbleSpriteFrame=[],e.isVisited=!1,e.isSameColor=!1,e.isLinked=!1,e.color=0,e}return n(e,t),e.prototype.init=function(t,e,o){void 0===o&&(o=0),this.color=o,t.addChild(this.node),this.node.position=e,this.setSpriteFrame(this.bubbleSpriteFrame[o]||this.bubbleSpriteFrame[0])},e.prototype.setSpriteFrame=function(t){this.getComponent(cc.Sprite).spriteFrame=t},e.prototype.playDieAnim=function(){var t=this;return new Promise(function(e){cc.tween(t.node).to(.1,{scale:1.2}).to(.05,{scale:.9}).call(function(){t.node.parent=null,e()}).start()})},e.prototype.playDropAnim=function(){var t=this,e=this.node.y-400;cc.tween(this.node).to(.3,{y:e,opacity:0}).call(function(){t.node.parent=null}).start()},i([a([cc.SpriteFrame])],e.prototype,"bubbleSpriteFrame",void 0),e=i([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"422a8fV0adEbby3zt0KeuKP","Global"),Object.defineProperty(o,"__esModule",{value:!0});var n={userInfo:null};o.G=n;var i={};o.Wechat=i,i.onRegisterUser=function(t,e){wx.cloud.init({env:"test-lgq"}),wx.cloud.callFunction({name:"login",data:{userinfo:t},success:function(t){console.log("\u767b\u5165\u6210\u529f",t),n.userInfo=t.result.data[0].userinfo,console.log(t.result.data[0].userinfo),e&&e()},fail:function(t){console.log(t)}})},i.onShare=function(){wx.cloud.callFunction({name:"share",success:function(t){console.log("\u83b7\u53d6\u5206\u4eab\u5bf9\u5e94\u7684\u4fe1\u606f",t.result),wx.shareAppMessage({title:t.result.title.title,imageUrl:t.result.pic.url})},fail:console.error})},i.onRightUpShare=function(){wx.showShareMenu({withShareTicket:!0}),wx.cloud.callFunction({name:"share",success:function(t){console.log("\u8fd9\u662f\u53f3\u4e0a\u89d2\u7684\u5206\u4eab\u4fe1\u606f",t.result),wx.onShareAppMessage(function(){return{title:t.result.title.title,imageUrl:t.result.pic.url}})},fail:console.error})},i.onAddGameData=function(t){wx.cloud.callFunction({name:"addGameData",data:{gameData:t},success:function(t){console.log("\u4fdd\u5b58\u6e38\u620f\u6210\u529f",t)},fail:console.error})},cc._RF.pop()},{}],Interface:[function(t,e,o){"use strict";cc._RF.push(e,"c4445PoFyNFWIsijYE246Lv","Interface"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Util:[function(t,e,o){"use strict";cc._RF.push(e,"b9984KPzXhLBJTBaELBb4mG","Util"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.random=function(t,e){return Math.floor(Math.random()*Math.abs(e-t+1))+t},t.SCREEN_W=720,t.SCREEN_H=1280,t.BUBBLE_R=40,t.BUBBLE_OFFEST_Y=40*Math.sqrt(3),t}();o.default=n,cc._RF.pop()},{}],aircraft:[function(t,e,o){"use strict";cc._RF.push(e,"12331QF9o1ISrVrs0R1gRC3","aircraft");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aircraft=null,e}return n(e,t),e.prototype.onLoad=function(){},i([a(cc.Node)],e.prototype,"aircraft",void 0),e=i([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],ball:[function(t,e,o){"use strict";cc._RF.push(e,"ce35aUhowpMvbZGOV1XvHuY","ball"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.originVY=0,e}return __extends(e,t),e.prototype.onBeginContact=function(t,e,o){var n=e.node.getComponent(cc.RigidBody);this.originVY?n.linearVelocity=cc.v2(0,this.originVY):this.originVY=n.linearVelocity.y},e.prototype.start=function(){},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],block:[function(t,e,o){"use strict";cc._RF.push(e,"d9aa6efEEpPxJqJI/hFcBz4","block"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colorArr=null,e.startPos=null,e.canMove=!0,e}return __extends(e,t),e.prototype.onLoad=function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this)},e.prototype.onTouchStart=function(t){this.canMove=!0,this.startPos=this.node.position;var e=window.hannuota.blockNodeArr[this.node.baseIdx];this.node.blockIdx!==e[e.length-1].blockIdx&&(this.canMove=!1)},e.prototype.onTouchMove=function(t){if(this.canMove){var e=t.getDelta();this.node.x+=e.x,this.node.y+=e.y}},e.prototype.onTouchEnd=function(){this.canMove&&window.hannuota.getBlockIdx(this.node,this.startPos)},e.prototype.onDestroy=function(){this.node.off("touchstart",this.onTouchStart,this),this.node.off("touchmove",this.onTouchMove,this),this.node.off("touchend",this.onTouchEnd,this)},e.prototype.init=function(t){this.node.getComponent(cc.Sprite).spriteFrame=this.colorArr.getSpriteFrame(t),this.node.width=80+40*t},__decorate([r(cc.SpriteAtlas)],e.prototype,"colorArr",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],bullet:[function(t,e,o){"use strict";cc._RF.push(e,"f9f78NF4JFIuKG7iKsO24Ku","bullet"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=300,e}return __extends(e,t),e.prototype.start=function(){var t=cc.misc.degreesToRadians(this.node.angle),e=cc.v2(0,1).rotate(t);this.getComponent(cc.RigidBody).linearVelocity=cc.v2(e.x*this.speed,e.y*this.speed)},e.prototype.onBeginContact=function(){console.log("\u5b50\u5f39\u9500\u6bc1\u4e86"),this.node.destroy()},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],camera:[function(t,e,o){"use strict";cc._RF.push(e,"4c0b3j3GMhD/b4vSxqWNJrG","camera"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e}return __extends(e,t),e.prototype.update=function(t){var e=this.target.convertToWorldSpaceAR(cc.v2(0,0)),o=this.node.parent.convertToNodeSpaceAR(e);this.node.x=o.x},__decorate([r(cc.Node)],e.prototype,"target",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],cells:[function(t,e,o){"use strict";cc._RF.push(e,"cf2e2bCtBlKBomjIWDPLjeJ","cells"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cellPrefab=null,e.btn=null,e.isPause=!0,e.cellArr=[],e.timer=0,e.maxX=0,e.maxY=0,e.perW=0,e.perH=0,e}return __extends(e,t),e.prototype.start=function(){this.initGrid(),this.btn.on("touchstart",this.switchPause,this),this.node.on("touchstart",this.ontouchstart,this)},e.prototype.ontouchstart=function(t){var e=t.getLocation(),o=~~((e=this.node.convertToNodeSpaceAR(e)).x/this.perW),n=~~(e.y/this.perH);o<0||o>this.maxX||n<0||n>this.maxY||this.cellArr[o][n].getComponent("cell").switchStatus()},e.prototype.switchPause=function(){this.isPause=!this.isPause,this.btn.getComponentInChildren(cc.Label).string=this.isPause?"\u5f00\u59cb":"\u6682\u505c"},e.prototype.initGrid=function(){var t=cc.winSize.height,e=(cc.winSize.width-300)/20,o=t/20;this.maxX=e,this.maxY=o,this.perW=20,this.perH=20;for(var n=0;n<e;n++){this.cellArr[n]=[];for(var i=0;i<o;i++){var r=cc.instantiate(this.cellPrefab);r.x=20*n,r.y=20*i,this.node.addChild(r),this.cellArr[n][i]=r}}},e.prototype.update=function(t){this.isPause||(this.timer+=t,this.timer>.1&&(this.timer=0,this.calcAllStatus()))},e.prototype.calcAllStatus=function(){var t=this,e=[];this.cellArr.forEach(function(o,n){e[n]=[],o.forEach(function(o,i){var r=t.calcCellStatus(n,i);e[n][i]=r})}),e.forEach(function(e,o){e.forEach(function(e,n){1!==e&&0!==e||t.cellArr[o][n].getComponent("cell").setStatus(e)})})},e.prototype.calcCellStatus=function(t,e){var o=this,n=0;return[{x:-1,y:1},{x:0,y:1},{x:1,y:1},{x:-1,y:0},{x:1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1}].forEach(function(i){var r=t+i.x,c=e+i.y;r<0&&(r=o.maxX-1),c<0&&(c=o.maxY-1),r>=o.maxX&&(r=0),c>=o.maxY&&(c=0),o.cellArr[r][c].getComponent("cell").status&&n++}),3===n?1:2===n?-1:0},__decorate([r(cc.Prefab)],e.prototype,"cellPrefab",void 0),__decorate([r(cc.Node)],e.prototype,"btn",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],cell:[function(t,e,o){"use strict";cc._RF.push(e,"b9b642mPMFEJYfA+dc59M3B","cell"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.inner=null,e.status=0,e}return __extends(e,t),e.prototype.switchStatus=function(){this.status?(this.status=0,this.inner.color=cc.color(255,255,255,255)):(this.status=1,this.inner.color=cc.color(0,0,0,255))},e.prototype.setStatus=function(t){this.status=t,this.inner.color=0===t?cc.color(255,255,255,255):cc.color(0,0,0,255)},__decorate([r(cc.Node)],e.prototype,"inner",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],feidao:[function(t,e,o){"use strict";cc._RF.push(e,"4f8ccUVzgdCSLFDyDCu2TgX","feidao"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.knife=null,e.target=null,e.knifePrefab=null,e.targetSpeed=5,e.knifeArr=[],e.isMoving=!1,e}return __extends(e,t),e.prototype.start=function(){var t=this;this.target.zIndex=1,this.node.on("touchstart",this.throwKnife,this),setInterval(function(){t.targetSpeed=~~(10*Math.random())-5||1},3e3)},e.prototype.throwKnife=function(){var t=this;if(!this.isMoving){this.isMoving=!0;var e=cc.v2(this.knife.x,this.target.y-this.target.height/2);cc.tween(this.knife).to(.1,{position:e}).call(function(){if(cc.tween(t.target).to(.1,{scale:1.15}).to(.1,{scale:.9}).to(.1,{scale:1}).start(),t.checkPos())cc.tween(t.knife).to(.1,{position:cc.v2(cc.winSize.width/2*Math.random(),-cc.winSize.height/2),angle:30*Math.random()}).call(function(){cc.director.loadScene("feidao")}).start();else{var o=cc.instantiate(t.knifePrefab);o.position=e,t.node.addChild(o),t.knifeArr.push(o),t.knife.y=-300,t.isMoving=!1}}).start()}},e.prototype.checkPos=function(){var t=this.knife.x,e=this.knife.y;return this.knifeArr.findIndex(function(o){var n=o.x-t,i=o.y-e;return n*n+i*i<900})>=0},e.prototype.update=function(t){var e=this;this.target.angle=(this.target.angle+this.targetSpeed)%360,this.knifeArr.forEach(function(t){t.angle=(t.angle+e.targetSpeed)%360;var o=2*(t.angle-90)*Math.PI/360,n=e.target.height/2;t.x=e.target.x+n*Math.cos(o),t.y=e.target.y+n*Math.sin(o)})},__decorate([r(cc.Node)],e.prototype,"knife",void 0),__decorate([r(cc.Node)],e.prototype,"target",void 0),__decorate([r(cc.Prefab)],e.prototype,"knifePrefab",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],hannuota:[function(t,e,o){"use strict";cc._RF.push(e,"903906kYOVEB5zMmziOSiXl","hannuota"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.box=null,e.blockPrefab=null,e.baseArr=[],e.blockNodeArr=[[],[],[]],e.blockNum=4,e}return __extends(e,t),e.prototype.onLoad=function(){window.hannuota=this,this.initBlock(this.blockNum)},e.prototype.initBlock=function(t){for(var e=0;e<t;e++){var o=cc.instantiate(this.blockPrefab);o.x=this.baseArr[0].x,o.y=44*e-122,o.baseIdx=0,o.blockIdx=t-1-e,o.getComponent("block").init(t-1-e),this.box.addChild(o),this.blockNodeArr[0].push(o)}},e.prototype.getBlockIdx=function(t,e){var o=t.position,n=this.baseArr.findIndex(function(t,e){return o.x>t.x-t.width/2&&o.x<=t.x+t.width/2});if(n<0||n===t.baseIdx)t.position=e;else{var i=this.blockNodeArr[n];if(i.length&&i[i.length-1].blockIdx<=t.blockIdx)t.position=e;else{var r=this.baseArr[n];t.x=r.x,this.blockNodeArr[t.baseIdx].pop(),t.y=44*i.length-122,t.baseIdx=n,i.push(t),i.length===this.blockNum&&setTimeout(function(){alert("\u6210\u529f\u5566")},50)}}},__decorate([r(cc.Node)],e.prototype,"box",void 0),__decorate([r(cc.Prefab)],e.prototype,"blockPrefab",void 0),__decorate([r([cc.Node])],e.prototype,"baseArr",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],jump:[function(t,e,o){"use strict";cc._RF.push(e,"ae74eYhjwNMeomYO6Xki1Li","jump"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ball=null,e.pingbanPrefab=null,e.pingbanArr=[],e.isStart=!1,e.ballSpeedX=-300,e.distance=150,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-2100)},e.prototype.start=function(){this.node.on("touchstart",this.boost,this),this.initPingban()},e.prototype.initPingban=function(){for(var t=0;t<5;t++){var e=cc.instantiate(this.pingbanPrefab);e.x=this.ball.x+t*this.distance,e.y=0,this.node.addChild(e),this.pingbanArr.push(e)}},e.prototype.boost=function(){this.ball.getComponent("ball").originVY&&(this.ball.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,-1200),this.isStart=!0)},e.prototype.onDestroy=function(){this.node.off("touchstart",this.boost,this)},e.prototype.getLastPingbanPosX=function(){for(var t=this.pingbanArr[0].x,e=0,o=this.pingbanArr;e<o.length;e++){var n=o[e];n.x>t&&(t=n.x)}return t},e.prototype.update=function(t){if(this.isStart){for(var e=0,o=this.pingbanArr;e<o.length;e++){var n=o[e];n.x+=this.ballSpeedX*t,n.x<-cc.winSize.width/2-n.width/2&&(n.x=this.getLastPingbanPosX()+this.distance,n.width=70*Math.random()+40,n.getComponent(cc.PhysicsBoxCollider).size.width=n.width)}this.ball.y<-cc.winSize.height/2&&(this.isStart=!1,alert("\u5931\u8d25\u4e86\u5427"),cc.director.loadScene("jump"))}},__decorate([r(cc.Node)],e.prototype,"ball",void 0),__decorate([r(cc.Prefab)],e.prototype,"pingbanPrefab",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],mario:[function(t,e,o){"use strict";cc._RF.push(e,"45157PTOgpFgZcWv56do4Da","mario"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mario=null,e.marioBody=null,e.dir=0,e}return __extends(e,t),e.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.marioBody=this.mario.getComponent(cc.RigidBody)},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.left:case cc.macro.KEY.right:this.dir=0;break;case cc.macro.KEY.space:}},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.left:this.dir=-1;break;case cc.macro.KEY.right:this.dir=1;break;case cc.macro.KEY.space:this.jump()}},e.prototype.update=function(t){0!==this.dir&&this.walk()},e.prototype.walk=function(){var t=this.marioBody.linearVelocity;t.x=200*this.dir,this.mario.scaleX=.2*this.dir,this.marioBody.linearVelocity=t},e.prototype.jump=function(){var t=this.marioBody.linearVelocity;t.y+=400,this.marioBody.linearVelocity=t},__decorate([r(cc.Node)],e.prototype,"mario",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],openData:[function(t,e,o){"use strict";cc._RF.push(e,"0df2f05HKxAEZ1t4eF4az4L","openData");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rankWrap=null,e.rankItemPrefab=null,e}return n(e,t),e.prototype.start=function(){var t=this,e=this;console.log("\u5f00\u59cb\u76d1\u542c\u4ece\u4e3b\u57df\u53d1\u6765\u7684\u4fe1\u606f"),wx.onMessage(function(o){(console.log("\u6536\u5230\u4e86\u4ece\u4e3b\u57df\u53d1\u6765\u7684\u4fe1\u606f",o),"GET"===o.type)?(t.rankWrap.children.forEach(function(t){t.destroy()}),wx.getFriendCloudStorage({keyList:o.data,success:function(t){var n=[];console.log("\u597d\u53cb\u5217\u8868\uff1a",t.data,o.data),t.data.forEach(function(o){var i=JSON.parse(o.KVDataList[0].value).wxgame.score;n.push(i),n.sort(function(t,e){return e-t}),console.log(n);for(var r=0;r<n.length;){for(var c=0;c<t.data.length;c++){var a=JSON.parse(t.data[c].KVDataList[0].value).wxgame.score;if(n[r]===a){console.log("\u6bcf\u4e00\u4e2aitem",t.data[c]),e.xx(t.data[c]),t.data.splice(c,1);break}}r++}})}})):"SET"===o.type&&wx.setUserCloudStorage({KVDataList:o.data,success:function(t){console.log("\u5b58\u50a8\u6210\u529f",t,o.data)},fail:function(t){console.error(t)},complete:function(t){}})})},e.prototype.xx=function(t){var e=cc.instantiate(this.rankItemPrefab);e.parent=this.rankWrap,e.x=0,e.getChildByName("name").getComponent(cc.Label).string=t.nickName||t.nickname,e.getChildByName("score").getComponent(cc.Label).string=JSON.parse(t.KVDataList[0].value).wxgame.score,cc.loader.load({url:t.avatarUrl,type:"png"},function(t,o){t&&console.error(t),e.getChildByName("mask").children[0].getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)})},i([a(cc.Node)],e.prototype,"rankWrap",void 0),i([a(cc.Prefab)],e.prototype,"rankItemPrefab",void 0),e=i([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],openPhy:[function(t,e,o){"use strict";cc._RF.push(e,"f81eesQztxEyJJAxT7w6Ozz","openPhy");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gravity=cc.v2(0,-320),e.isDebug=!1,e}return n(e,t),e.prototype.onLoad=function(){if(cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=this.gravity,console.log("\u6253\u5f00\u4e86\u7269\u7406\u5f15\u64ce"),this.isDebug){var t=cc.PhysicsManager.DrawBits;cc.director.getPhysicsManager().debugDrawFlags=t.e_aabbBit|t.e_pairBit|t.e_centerOfMassBit|t.e_jointBit|t.e_shapeBit}else cc.director.getPhysicsManager().debugDrawFlags=0},i([a(cc.Vec2)],e.prototype,"gravity",void 0),i([a],e.prototype,"isDebug",void 0),e=i([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],paopaolong:[function(t,e,o){"use strict";cc._RF.push(e,"10fb3J/DuFN+4i5vLE6zpBw","paopaolong");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./common/Util"),c=t("./common/Global"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatarNode=null,e.nickName=null,e.bubbleLayer=null,e.bubblePrefab=null,e.shooter=null,e.levelData=null,e.bubbleArr=[],e.nowBubble=null,e.isShooting=!1,e.isWalking=!1,e.shootDir=null,e.nowLevel=1,e.shooterPos=null,e.shootSpeed=2500,e}return n(e,t),e.prototype.onLoad=function(){this.initWexin(),this.shooterPos=this.shooter.position,this.initLevel(this.nowLevel),this.openTouch(),this.createRandomBubble()},e.prototype.initWexin=function(){var t=this;wx.login({timeout:1e4,success:function(t){console.log("\u6210\u529f\u4e86",t)},fail:function(t){console.log("\u5931\u8d25\u4e86",t)},complete:function(t){console.log("\u5b8c\u6210\u4e86",t)}});var e=wx.createUserInfoButton({type:"text",text:"\u5f00\u59cb\u6e38\u620f",style:{left:wx.getSystemInfoSync().screenWidth/2-100,top:wx.getSystemInfoSync().screenHeight/2-20,width:200,height:40,lineHeight:40,backgroundColor:"#fb94a9",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:10}});e.show(),e.onTap(function(o){console.log(o),"getUserInfo:ok"===o.errMsg?(console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f"),c.Wechat.onRegisterUser(o.userInfo,t.initUser.bind(t)),c.Wechat.onRightUpShare(),e.destroy()):console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25")})},e.prototype.initUser=function(){var t=this;if(console.log("G.userInfo",c.G.userInfo),c.G.userInfo){console.log("\u6267\u884c\u4e86\u5566\u5566\u5566\u5566\u521d\u59cb\u5316\u7528\u6237\u4fe1\u606f");var e=c.G.userInfo.avatarUrl;cc.loader.load({url:e,type:"jpg"},function(e,o){var n=new cc.SpriteFrame(o);e&&console.log("\u7528\u6237\u5934\u50cf",e),t.avatarNode.getComponent(cc.Sprite).spriteFrame=n}),this.nickName.getComponent(cc.Label).string=c.G.userInfo.nickName}},e.prototype.onShare=function(){c.Wechat.onShare()},e.prototype.reset=function(){this.bubbleArr.forEach(function(t){t.forEach(function(t){t&&(t.parent=null)})}),this.nowBubble&&(this.nowBubble.parent=null),this.bubbleArr=[],this.nowBubble=null,this.isShooting=!1,this.shootDir=null,this.nowLevel=1,this.isWalking=!1,this.initLevel(this.nowLevel),this.createRandomBubble()},e.prototype.createRandomBubble=function(){this.isWalking=!1;var t=cc.instantiate(this.bubblePrefab);t.getComponent("Bubble").init(this.bubbleLayer,this.shooterPos,r.default.random(1,4)),this.nowBubble=t},e.prototype.convertEventToDegree=function(t){var e=t.getLocation(),o=e.x,n=e.y,i=this.shooterPos,r=i.x,c=i.y,a=Math.atan2(n-c,o-r),s=cc.misc.radiansToDegrees(a);s<20||s>160||(this.shootDir=cc.v2(Math.cos(a),Math.sin(a)),this.shooter.angle=s-90)},e.prototype._touchStart=function(t){this.isShooting||this.isWalking||this.convertEventToDegree(t)},e.prototype._touchsMove=function(t){this.isShooting||this.isWalking||this.convertEventToDegree(t)},e.prototype._touchEnd=function(t){this.isShooting||this.isWalking||(this.isShooting=!0,this.convertEventToDegree(t))},e.prototype.openTouch=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchsMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEnd,this)},e.prototype.closeTouch=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._touchsMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this._touchEnd,this)},e.prototype.onDestroy=function(){this.closeTouch()},e.prototype.initLevel=function(t){var e=this;this.levelData.json[t].forEach(function(t,o){e.bubbleArr[o]=[],t.forEach(function(t,n){if(0!==t){var i=cc.instantiate(e.bubblePrefab),r=e.convertRowColToPos(o,n);i.getComponent("Bubble").init(e.bubbleLayer,r,t),e.bubbleArr[o][n]=i}})})},e.prototype.convertRowColToPos=function(t,e){var o=r.default.BUBBLE_R+t%2*r.default.BUBBLE_R+2*r.default.BUBBLE_R*e,n=r.default.SCREEN_H-(r.default.BUBBLE_OFFEST_Y*t+r.default.BUBBLE_R);return cc.v2(o,n)},e.prototype.convertPosToRowCol=function(t){var e=t.x,o=t.y,n=Math.round((r.default.SCREEN_H-o-r.default.BUBBLE_R)/r.default.BUBBLE_OFFEST_Y),i=Math.round((e-r.default.BUBBLE_R-n%2*r.default.BUBBLE_R)/(2*r.default.BUBBLE_R));return n<0&&(n=0),i<0&&(i=0),{i:n,j:i}},e.prototype.update=function(t){this.isShooting&&(this.moveBubble(t),this.checkHit())},e.prototype.checkHit=function(){for(var t=0;t<this.bubbleArr.length;t++)for(var e=0;e<this.bubbleArr[t].length;e++){var o=this.bubbleArr[t][e];if(o)if(o.getComponent("Bubble").color)if(!(Math.abs(o.position.y-this.nowBubble.position.y)>2*r.default.BUBBLE_R))if(!(Math.abs(o.position.x-this.nowBubble.position.x)>2*r.default.BUBBLE_R))if(o.position.sub(this.nowBubble.position).mag()<2*r.default.BUBBLE_R)return this.isShooting=!1,void this.modifyBubblePos()}this.nowBubble.y>=r.default.SCREEN_H-r.default.BUBBLE_R&&(this.isShooting=!1,this.modifyBubblePos())},e.prototype.modifyBubblePos=function(){var t=this.convertPosToRowCol(this.nowBubble.position),e=t.i,o=t.j;this.nowBubble.position=this.convertRowColToPos(e,o),this.bubbleArr[e]?(this.bubbleArr[e][o]=this.nowBubble,this.walkAroundBubble(e,o)):(console.log("\u5230\u5e95\u4e86\uff0c\u4f60\u8f93\u4e86"),this.reset())},e.prototype.walkAroundBubble=function(t,e){var o=this;this.isWalking=!0,this.markSameColorBubble(t,e,this.nowBubble.getComponent("Bubble").color);var n=0,i=[];this.bubbleArr.forEach(function(t,e){t.forEach(function(t,o){if(t){var r=t.getComponent("Bubble");r.isSameColor?(r.isSameColor=!1,r.isVisited=!1,n++,i.push({row:e,col:o})):(r.isSameColor=!1,r.isVisited=!1)}})}),n>=3?(i.forEach(function(t){var e=o.bubbleArr[t.row][t.col];o.bubbleArr[t.row][t.col]=null,e.getComponent("Bubble").playDieAnim()}),this.scheduleOnce(this.walkLinkBubble,.3)):this.createRandomBubble()},e.prototype.markSameColorBubble=function(t,e,o){if(this.bubbleArr[t]&&this.bubbleArr[t][e]){var n=this.bubbleArr[t][e].getComponent("Bubble");if(!n.isVisited&&n.color===o){n.isSameColor=!0,n.isVisited=!0;var i=t,r=t%2?e:e-1;this.markSameColorBubble(i,r-1,o),this.markSameColorBubble(i,r+1,o),this.markSameColorBubble(i-1,r,o),this.markSameColorBubble(i-1,r+1,o),this.markSameColorBubble(i+1,r,o),this.markSameColorBubble(i+1,r+1,o)}}},e.prototype.walkLinkBubble=function(){for(var t=this,e=0;e<this.bubbleArr[0].length;e++)this.markLinkBubble(0,e);var o=!1;this.bubbleArr.forEach(function(e,n){e.forEach(function(e,i){if(e){var r=e.getComponent("Bubble");r.isLinked?(r.isLinked=!1,r.isVisited=!1):(o=!0,t.bubbleArr[n][i]=null,r.playDropAnim())}})}),o?this.scheduleOnce(this.createRandomBubble,.4):this.createRandomBubble()},e.prototype.markLinkBubble=function(t,e){if(this.bubbleArr[t]&&this.bubbleArr[t][e]){var o=this.bubbleArr[t][e].getComponent("Bubble");if(!o.isVisited){o.isVisited=!0,o.isLinked=!0;var n=t,i=t%2?e:e-1;this.markLinkBubble(n,i-1),this.markLinkBubble(n,i+1),this.markLinkBubble(n-1,i),this.markLinkBubble(n-1,i+1),this.markLinkBubble(n+1,i),this.markLinkBubble(n+1,i+1)}}},e.prototype.moveBubble=function(t){(this.nowBubble.x>cc.winSize.width-r.default.BUBBLE_R||this.nowBubble.x<r.default.BUBBLE_R)&&(this.shootDir.x=-this.shootDir.x);var e=this.shootSpeed*this.shootDir.x*t,o=this.shootSpeed*this.shootDir.y*t;this.nowBubble.x+=e,this.nowBubble.y+=o},e.prototype.onSaveGameData=function(){var t=~~(+new Date/1e3),e={level:1+~~(5*Math.random()),coin:1e3,due:t};c.Wechat.onAddGameData(e)},i([l(cc.Node)],e.prototype,"avatarNode",void 0),i([l(cc.Label)],e.prototype,"nickName",void 0),i([l(cc.Node)],e.prototype,"bubbleLayer",void 0),i([l(cc.Prefab)],e.prototype,"bubblePrefab",void 0),i([l(cc.Node)],e.prototype,"shooter",void 0),i([l(cc.JsonAsset)],e.prototype,"levelData",void 0),e=i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./common/Global":"Global","./common/Util":"Util"}],perPuzzle:[function(t,e,o){"use strict";cc._RF.push(e,"810f8Ak9mJAMp8IZMS0l5pf","perPuzzle"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPos=null,e}return __extends(e,t),e.prototype.init=function(t,e){var o=this.node.getComponent(cc.Sprite),n=this.node.width,i=this.node.height,r=new cc.SpriteFrame(t,cc.rect(e.x*n,e.y*i,n,i));o.spriteFrame=r},e.prototype.onLoad=function(){this.node.on("touchstart",this.touchstart,this),this.node.on("touchmove",this.touchmove,this),this.node.on("touchend",this.touchend,this)},e.prototype.touchstart=function(){this.node.opacity=120,this.startPos=this.node.position,this.node.zIndex=1},e.prototype.touchmove=function(t){var e=t.getDelta();this.node.x+=e.x,this.node.y+=e.y},e.prototype.touchend=function(){this.node.opacity=255,this.node.zIndex=0,this.checkPutPos()},e.prototype.checkPutPos=function(){var t=this.node.width,e=this.node.height,o=this.getPosIdx(this.node),n=o.i,i=o.j,r=window.puzzle.puzzleArr[n][i];if(r){this.node.setPosition(i*t,-n*e),r.setPosition(this.startPos);var c=this.getPosIdx(r);console.log(c.i,c.j,"---",n,i),window.puzzle.puzzleArr[n][i]=this.node,window.puzzle.puzzleArr[c.i][c.j]=r}else this.node.setPosition(this.startPos)},e.prototype.getPosIdx=function(t){var e=this.node.width,o=this.node.height;return console.log(e,o),{i:Math.abs(parseInt((t.y-o/2)/o)),j:Math.abs(parseInt((t.x+e/2)/e))}},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],plane:[function(t,e,o){"use strict";cc._RF.push(e,"88662v2PVtE0rwCOXNso1ce","plane");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coinNode=null,e.topCoinNode=null,e.coinPrefab=null,e.aircraft=null,e.launchPoint=null,e.zidanPrefab=null,e.coinPool=null,e.zidanPool=null,e.initCoinCount=16,e.initZidanCount=16,e.defaultZidanNum=2,e}return n(e,t),e.prototype.onLoad=function(){wx.login({timeout:1e4,success:function(t){console.log("\u6210\u529f\u4e86",t)},fail:function(t){console.log("\u5931\u8d25\u4e86",t)},complete:function(t){console.log("\u5b8c\u6210\u4e86",t)}}),this.createCoinPool(),this.createZidanPool(),this.coinNode.on(cc.Node.EventType.MOUSE_DOWN,this.collectCoin.bind(this),this),this.node.on(cc.Node.EventType.MOUSE_MOVE,this.moveAircraft.bind(this),this),this.node.on(cc.Node.EventType.MOUSE_MOVE,this.moveAircraft.bind(this),this)},e.prototype.moveAircraft=function(t){var e=t.getLocation();e=this.node.convertToNodeSpaceAR(e),this.aircraft.position=e,this.schedule(this.launchZidan,.1)},e.prototype.changeZidanNum=function(){this.defaultZidanNum=this.randomNum(1,6)},e.prototype.launchZidan=function(){for(var t=this.zidanPrefab.data.width-20,e=t*(this.defaultZidanNum-1)/2,o=0;o<this.defaultZidanNum;o++){var n=null;n=this.zidanPool.size()>0?this.zidanPool.get():cc.instantiate(this.zidanPrefab);var i=this.launchPoint.convertToWorldSpaceAR(cc.v2(0,0));(i=this.node.convertToNodeSpaceAR(i)).x+=t*o,i.x-=e,n.position=i,n.parent=this.node}},e.prototype.collectCoin=function(t){var e=t.target.convertToWorldSpaceAR(cc.v2(0,0)),o=this.topCoinNode.convertToWorldSpaceAR(cc.v2(0,0));this.createCoinPosAndMove(e,o,this.node,200,16)},e.prototype.createCoinPosAndMove=function(t,e,o,n,i){var r=this;t=o.convertToNodeSpaceAR(t),e=o.convertToNodeSpaceAR(e);var c=this.createRandomCirclePos(t.x,t.y,n,i);(c=this.sortPosArr(c,e.x,e.y)).forEach(function(n,i){var c=null;(c=r.coinPool.size()>0?r.coinPool.get():cc.instantiate(r.coinPrefab)).position=t,c.parent=o,cc.tween(c).to(.4,{position:cc.v2(n.x,n.y)}).delay(.02*i).to(.5,{position:cc.v2(e.x,e.y)}).call(function(){r.coinPool.put(c)}).start()})},e.prototype.sortPosArr=function(t,e,o){return t.sort(function(t,n){return Math.pow(t.x-e,2)+Math.pow(t.y-o,2)-(Math.pow(n.x-e,2)+Math.pow(n.y-o,2))})},e.prototype.createRandomCirclePos=function(t,e,o,n){for(var i=[],r=cc.misc.degreesToRadians(~~(360/n)),c=0;c<n;c++){var a=t+o*Math.sin(r*c)+this.randomNum(-40,40),s=e+o*Math.cos(r*c)+this.randomNum(-40,40);i.push({x:a,y:s})}return i},e.prototype.randomNum=function(t,e){return~~(Math.random()*(e-t)+t)},e.prototype.createCoinPool=function(){this.coinPool=new cc.NodePool;for(var t=0;t<this.initCoinCount;t++){var e=cc.instantiate(this.coinPrefab);this.coinPool.put(e)}},e.prototype.createZidanPool=function(){this.zidanPool=new cc.NodePool;for(var t=0;t<this.initZidanCount;t++){var e=cc.instantiate(this.zidanPrefab);this.zidanPool.put(e)}window.zidanPool=this.zidanPool},e.prototype.update=function(t){},i([a(cc.Node)],e.prototype,"coinNode",void 0),i([a(cc.Node)],e.prototype,"topCoinNode",void 0),i([a(cc.Prefab)],e.prototype,"coinPrefab",void 0),i([a(cc.Node)],e.prototype,"aircraft",void 0),i([a(cc.Node)],e.prototype,"launchPoint",void 0),i([a(cc.Prefab)],e.prototype,"zidanPrefab",void 0),e=i([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],puzzle:[function(t,e,o){"use strict";cc._RF.push(e,"fe603EXA/BGi7YA62WmjXyw","puzzle"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.perPuzzle=null,e.box=null,e.picTexture=null,e.puzzleArr=[],e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;window.puzzle=this,cc.loader.loadRes("girl.png",function(e,o){t.picTexture=o;for(var n=0;n<4;n++){t.puzzleArr[n]=[];for(var i=0;i<4;i++){var r=cc.instantiate(t.perPuzzle);r.getComponent("perPuzzle").init(o,cc.v2(i,n)),r.x=180*i,r.y=180*-n,t.box.addChild(r),t.puzzleArr[n][i]=r}}t.randomPuzzle()})},e.prototype.randomPuzzle=function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++){var o=~~(4*Math.random()),n=~~(4*Math.random()),i=this.puzzleArr[t][e],r=this.puzzleArr[o][n],c=i.position,a=r.position;i.position=a,r.position=c,this.puzzleArr[t][e]=r,this.puzzleArr[o][n]=i}},__decorate([r(cc.Prefab)],e.prototype,"perPuzzle",void 0),__decorate([r(cc.Node)],e.prototype,"box",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],rank:[function(t,e,o){"use strict";cc._RF.push(e,"bb462bg49JD37vFn7+sLNVC","rank");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rankLayer=null,e.subContextView=null,e}return n(e,t),e.prototype.start=function(){this.subContextView=this.rankLayer.getComponent(cc.WXSubContextView),this.subContextView.enabled=!1,this.rankLayer.active=!1},e.prototype.showRanking=function(){console.log("\u663e\u793a\u6392\u884c\u699c");var t=~~((new Date).getTime()/1e3),e=[];e.push("score"),wx.getOpenDataContext().postMessage({type:"GET",data:e,timer:t}),this.subContextView.enabled=!0,this.rankLayer.active=!0,this.subContextView.update(),console.log("\u5df2\u7ecf\u5411\u5b50\u57df\u53d1\u9001GET\u4fe1\u606f")},e.prototype.hideRanking=function(){console.log("\u9690\u85cf\u6392\u884c\u699c"),this.subContextView.enabled=!1,this.rankLayer.active=!1},e.prototype.refreshRanking=function(){console.log("\u7ed9\u5f00\u653e\u6570\u636e\u57df\u53d1\u9001\u4fe1\u606f");var t=~~(+new Date/1e3),e={wxgame:{score:~~(100*Math.random()),update_time:t}},o=JSON.stringify(e),n=[];n.push({key:"score",value:o}),wx.getOpenDataContext().postMessage({type:"SET",data:n,timer:t}),console.log("\u7ed9\u5b50\u57df\u53d1\u9001SET\u4fe1\u606f\u5b8c\u6bd5")},i([a(cc.Node)],e.prototype,"rankLayer",void 0),e=i([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],sense:[function(t,e,o){"use strict";cc._RF.push(e,"06377O/L7dHyrU9zNmTB6qg","sense"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sense=null,e.MAX_R=100,e.speed=200,e.tank=null,e.box=null,e.camera=null,e.offset=cc.v2(0,0),e}return __extends(e,t),e.prototype.start=function(){var t=this;this.camera&&(this.offset=this.camera.getPosition().sub(this.tank.getPosition())),this.direction=cc.v2(0,0),this.sense.setPosition(cc.v2(0,0)),this.sense.on(cc.Node.EventType.TOUCH_START,function(t){}),this.sense.on(cc.Node.EventType.TOUCH_MOVE,function(e){var o=e.getLocation(),n=t.box.convertToNodeSpaceAR(o),i=n.mag();t.direction.x=n.x/i,t.direction.y=n.y/i,i>t.MAX_R&&(n.x=n.x*t.MAX_R/i,n.y=n.y*t.MAX_R/i),t.sense.setPosition(n)}),this.sense.on(cc.Node.EventType.TOUCH_END,function(e){t.sense.setPosition(cc.v2(0,0)),t.direction=cc.v2(0,0)}),this.sense.on(cc.Node.EventType.TOUCH_CANCEL,function(e){t.sense.setPosition(cc.v2(0,0)),t.direction=cc.v2(0,0)})},e.prototype.update=function(t){if(this.camera&&(this.camera.x=this.tank.x+this.offset.x,this.camera.y=this.tank.y+this.offset.y),0!==this.direction.x||0!==this.direction.y){var e=this.speed*this.direction.x*t,o=this.speed*this.direction.y*t;this.tank.x+=e,this.tank.y+=o,console.log(this.direction);var n=360*Math.atan2(this.direction.y,this.direction.x)/(2*Math.PI);n-=90,this.tank.angle=n}},__decorate([r(cc.Node)],e.prototype,"sense",void 0),__decorate([r(cc.Node)],e.prototype,"tank",void 0),__decorate([r(cc.Node)],e.prototype,"box",void 0),__decorate([r(cc.Node)],e.prototype,"camera",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],tank:[function(t,e,o){"use strict";cc._RF.push(e,"309d2B5AqRBna90Tm/I4I5l","tank"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Bullet=null,e.firePos=null,e.boomNode=null,e.v=0,e.h=0,e.tank=null,e.body=null,e.speed=300,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0},e.prototype.start=function(){this.addEvent(),this.body=this.tank.getComponent(cc.RigidBody)},e.prototype.update=function(t){0!==this.v?(this.body.linearVelocity=cc.v2(0,this.v*this.speed),this.tank.angle=this.v>0?0:180):0!==this.h?(this.body.linearVelocity=cc.v2(this.h*this.speed,0),this.tank.angle=this.h>0?270:90):this.body.linearVelocity=cc.v2(0,0)},e.prototype.fire=function(){this.boom("blue");var t=cc.instantiate(this.Bullet);t.angle=this.tank.angle;var e=this.firePos.convertToWorldSpaceAR(cc.v2(0,0));t.x=e.x,t.y=e.y,t.setParent(cc.director.getScene())},e.prototype.boom=function(t){var e=this.boomNode.getComponent(cc.ParticleSystem);t&&(e.startColor=e.endColor=t),e.resetSystem()},e.prototype.addEvent=function(){var t=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){e.keyCode===cc.macro.KEY.w?t.v=1:e.keyCode===cc.macro.KEY.a?t.h=-1:e.keyCode===cc.macro.KEY.s?t.v=-1:e.keyCode===cc.macro.KEY.d&&(t.h=1),e.keyCode===cc.macro.KEY.l&&t.fire()}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){e.keyCode===cc.macro.KEY.w&&1===t.v?t.v=0:e.keyCode===cc.macro.KEY.a&&-1===t.h?t.h=0:e.keyCode===cc.macro.KEY.s&&-1===t.v?t.v=0:e.keyCode===cc.macro.KEY.d&&1===t.h&&(t.h=0)})},__decorate([r(cc.Prefab)],e.prototype,"Bullet",void 0),__decorate([r(cc.Node)],e.prototype,"firePos",void 0),__decorate([r(cc.Node)],e.prototype,"boomNode",void 0),__decorate([r(cc.Node)],e.prototype,"tank",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],zidan:[function(t,e,o){"use strict";cc._RF.push(e,"7db8bSRr1BCUIUAPq9Rad3o","zidan");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=800,e}return n(e,t),e.prototype.start=function(){},e.prototype.update=function(t){var e=this.speed*t;this.node.y+=e,console.log(window.zidanPool.size())},e.prototype.onBeginContact=function(t,e,o){("wall"===o.node.name||this.node.y>cc.winSize.height/2)&&window.zidanPool.put(e.node)},e=i([c],e)}(cc.Component));o.default=a,cc._RF.pop()},{}]},{},["Bubble","Interface","aircraft","ball","block","bullet","camera","cell","cells","Global","Util","openData","openPhy","rank","feidao","hannuota","jump","mario","paopaolong","perPuzzle","plane","puzzle","sense","tank","zidan"]);